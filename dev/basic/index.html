<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Basic Usage · NearestNeighborDescent.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">NearestNeighborDescent.jl</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>Basic Usage</a><ul class="internal"><li><a class="tocitem" href="#Graph-Construction-nndescent-1"><span>Graph Construction <code>nndescent</code></span></a></li><li><a class="tocitem" href="#Querying-KNN-Graphs-search-1"><span>Querying KNN Graphs <code>search</code></span></a></li></ul></li><li><span class="tocitem">KNN Graphs</span><ul><li><a class="tocitem" href="../graphs/">KNN Graphs</a></li></ul></li><li><span class="tocitem">Reference</span><ul><li><a class="tocitem" href="../ref/public/">Public</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Basic Usage</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Basic Usage</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/dillondaudert/NearestNeighborDescent.jl/blob/master/docs/src/basic.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Usage-1"><a class="docs-heading-anchor" href="#Usage-1">Usage</a><a class="docs-heading-anchor-permalink" href="#Usage-1" title="Permalink"></a></h1><h2 id="Graph-Construction-nndescent-1"><a class="docs-heading-anchor" href="#Graph-Construction-nndescent-1">Graph Construction <code>nndescent</code></a><a class="docs-heading-anchor-permalink" href="#Graph-Construction-nndescent-1" title="Permalink"></a></h2><p><code>nndescent</code> builds the approximate kNN graph:</p><pre><code class="language-julia">nndescent(data, n_neighbors, metric; max_iters, sample_rate, precision) -&gt; graph</code></pre><ul><li><code>data</code>: The set of points to build the tree from. This must be of type <code>Vector{V}</code>, where <code>V &lt;: AbstractVector</code> <strong>or</strong> <code>AbstractMatrix</code>.</li><li><code>n_neighbors</code>: An integer specifies the number of neighbors to find</li><li><code>metric</code>: Any metric <code>M</code> where <code>M &lt;: PreMetric</code> from the Distances.jl package.</li></ul><p>The performance of NN Descent can be tuned with several keyword arguments.</p><ul><li><code>max_iters</code>: This controls the maximum number of iterations to search for neighbors. Default is <code>10</code>.</li><li><code>sample_rate</code>: The algorithm performs a local join around the candidate neighbors of each point during execution. The sample rate is the likelihood that each candidate be included in the local join for an iteration. Default is <code>1.</code>.</li><li><code>precision</code>: This argument roughly corresponds to the fraction of true nearest neighbors that will be missed by the algorithm. Default <code>.001</code>.</li></ul><p>The k-nearest neighbors can be accessed with</p><pre><code class="language-julia">knn_matrices(graph) -&gt; indices, distances</code></pre><p>The <code>indices</code> and <code>distances</code> are both <code>KxN</code> matrices containing ids and distances to each point&#39;s neighbors, respectively, where <code>K = n_neighbors</code> and <code>N = length(data)</code>.</p><p>Example:</p><pre><code class="language-julia">using NearestNeighborDescent
data = [rand(10) for _ in 1:1000]
# OR data = rand(10, 1000)

# nn descent search
graph = nndescent(data, 10, Euclidean())

# access point i&#39;s jth nearest neighbor:
indices, distances = knn_matrices(graph)
indices[j, i]
distances[j, i]</code></pre><h2 id="Querying-KNN-Graphs-search-1"><a class="docs-heading-anchor" href="#Querying-KNN-Graphs-search-1">Querying KNN Graphs <code>search</code></a><a class="docs-heading-anchor-permalink" href="#Querying-KNN-Graphs-search-1" title="Permalink"></a></h2><p>Once constructed, the <code>ApproximateKNNGraph</code> can be used to find the nearest neighbors to new points. This is done via the <code>search</code> method:</p><pre><code class="language-julia">search(graph, queries, n_neighbors; max_candidates) -&gt; indices, distances</code></pre><ul><li><code>graph</code>: An instance of <code>ApproximateKNNGraph</code></li><li><code>queries</code>: A vector of new data points of type <code>Vector{V}</code> or <code>AbstractMatrix</code>. Note that the dimensionality of the queries must match that of the data used to originally construct the graph.</li><li><code>n_neighbors</code>: The number of neighbors to find for each query. This does <em>not</em> have to be the same as the number used to construct <code>graph</code>.</li><li><code>max_candidates</code>: Each query maintains a heap of candidate neighbors - the maximum size of that heap is controlled with this keyword arg (default <code>max(n_neighbors, 20)</code>).</li></ul><p>Similar to <code>knn_matrices</code>, this returns two matrices for the indices and distances to the nearest neighbors of each query.</p><p>Example:</p><pre><code class="language-julia">queries = [rand(10) for _ in 1:100]
# OR queries = rand(10, 100)
indices, distances = search(graph, queries, 5)</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../graphs/">KNN Graphs »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Sunday 8 December 2019 18:38">Sunday 8 December 2019</span>. Using Julia version 1.3.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
